<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta property="og:site_name" content="Another Swift Blog"/><link rel="canonical" href="https://tprezioso.github.io/posts/2020/2020-04-27-what-is-arc-memory-management-in-swift"/><meta name="twitter:url" content="https://tprezioso.github.io/posts/2020/2020-04-27-what-is-arc-memory-management-in-swift"/><meta property="og:url" content="https://tprezioso.github.io/posts/2020/2020-04-27-what-is-arc-memory-management-in-swift"/><title>"What is ARC memory management in Swift" | Another Swift Blog</title><meta name="twitter:title" content=""What is ARC memory management in Swift" | Another Swift Blog"/><meta property="og:title" content=""What is ARC memory management in Swift" | Another Swift Blog"/><meta name="description" content="Another Swift Blog"/><meta name="twitter:description" content="Another Swift Blog"/><meta property="og:description" content="Another Swift Blog"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Another Swift Blog"/></head><body class="item-page"><header><img src="https://pbs.twimg.com/profile_images/1187503085280813057/rAeCCxy2_400x400.jpg" alt="Tom Prezioso" class="author-avatar"/><div class="wrapper"><a href="/" class="site-name">Another Swift Blog</a><nav><ul><li><a href="/posts" class="selected">Posts</a></li><li><a href="/about">About</a></li><li><a href="/portfolio">Portfolio</a></li><li><a href="/contact">Contact</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>What is ARC memory management in Swift</h1><p>What is <strong>ARC</strong>? <strong>ARC</strong> stands for <strong>Automatic Reference Counting</strong>. Reference counting is a way of storing number references or pointer to a object. In short <strong>ARC</strong> helps to store references into memory and helps clean up memory when it is not being used.</p><p>Apples documentation says “Memory management “just works” in Swift, and you do not need to think about memory management yourself. <strong>ARC</strong> automatically frees up the memory used by class instances when those instances are no longer needed.”</p><p><strong>ARC</strong> uses references like <strong>strong</strong>, <strong>weak</strong>, or <strong>unowned</strong> as a way of knowing when to free memory for a given object. By default when we declare a class property its a <strong>strong</strong> reference type. In this post we will take a look at how to use <strong>strong</strong> and <strong>weak</strong> references in <strong>ARC</strong>.</p><p>Let’s take a look at the example code below.</p><p>class Person { var name: String var device: Device? init(name: String, device: Device?) { self.name = name self.device = device } }</p><p>class Device { var owner: Person? var device: String init(owner: Person, device: String) { self.owner = owner self.device = device } }</p><p>In the above example we created two classes, a <strong>Person</strong> class and a <strong>Device</strong> class. We created these classes to show an example of a <strong>strong</strong> reference cycle.</p><p>The <strong>Person</strong> class has a <strong>strong</strong> reference to the <strong></strong>Device<strong></strong> class through it’s <strong></strong>device<strong></strong> property, and <strong></strong>device<strong></strong> has a <strong>strong</strong> reference to <strong>Person</strong> through its <strong>owner</strong> property. The problem with this is that these objects hold <strong>strong</strong> references to one another. This means that <strong>ARC</strong> is unable to deallocate memory when one of the objects are removed because they reference one another. This creates a memory leak in our code.</p><p>To fix our <strong>strong</strong> reference cycle problem we will have to set our <strong>device</strong> variable to a <strong>weak</strong> variable type in our <strong>Person</strong> class. This allows the variable to be deallocated from memory when its not need.</p><p>class Person { var name: String weak var device: Device? init(name: String, device: Device?) { self.name = name self.device = device } }</p><p>class Device { var owner: Person? var device: String init(owner: Person, device: String) { self.owner = owner self.device = device } }</p><p>Above we now have the <strong>Device</strong> class with a <strong>strong</strong> reference to the <strong>Person</strong> class, but the <strong>Person</strong> class has a <strong>weak</strong> reference to the <strong>Device</strong> class.</p><p>When we use a <strong>weak</strong> reference type on a object it needs to be a optional because it has to have the ability to become nil. If the <strong>Device</strong> class variable becomes nil our <strong>Person</strong> class will deallocate or release the memory stored. This corrects our <strong>strong</strong> reference cycle and stops our memory leak.</p><p><strong>A good rule of thumb</strong>:</p><p>A <strong>Strong</strong> references should be used when a parent object is referencing a child object.</p><p>A <strong>Weak</strong> references should be used to avoid retain cycles.</p><p>This is a brief look at how <strong>ARC</strong> memory management works. For a deeper dive into <strong>ARC</strong> I recommending checking out the Swift documentation on <a href="https://bit.ly/2L94na0">Automatic Reference Counting</a>.</p><p>I hope this opened the curtain to what goes on behind the scenes of Swift memory management and helps to shed some light on how <strong>ARC</strong> works in Swift.</p><p>👨🏻‍💻 Happy Programming! 👨🏻‍💻</p></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/swift">Swift</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>