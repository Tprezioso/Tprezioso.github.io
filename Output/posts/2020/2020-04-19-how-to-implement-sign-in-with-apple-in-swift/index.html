<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta property="og:site_name" content="Another Swift Blog"/><link rel="canonical" href="https://tprezioso.github.io/posts/2020/2020-04-19-how-to-implement-sign-in-with-apple-in-swift"/><meta name="twitter:url" content="https://tprezioso.github.io/posts/2020/2020-04-19-how-to-implement-sign-in-with-apple-in-swift"/><meta property="og:url" content="https://tprezioso.github.io/posts/2020/2020-04-19-how-to-implement-sign-in-with-apple-in-swift"/><title>"How to Implement Sign in with Apple in Swift" | Another Swift Blog</title><meta name="twitter:title" content=""How to Implement Sign in with Apple in Swift" | Another Swift Blog"/><meta property="og:title" content=""How to Implement Sign in with Apple in Swift" | Another Swift Blog"/><meta name="description" content="Another Swift Blog"/><meta name="twitter:description" content="Another Swift Blog"/><meta property="og:description" content="Another Swift Blog"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Another Swift Blog"/></head><body class="item-page"><header><img src="images/tom.jpg" class="author-avatar"/><div class="wrapper"><a href="/" class="site-name">Another Swift Blog</a><nav><ul><li><a href="/posts" class="selected">Posts</a></li><li><a href="/about">About</a></li><li><a href="/portfolio">Portfolio</a></li><li><a href="/contact">Contact</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>How to Implement Sign in with Apple in Swif</h1><p>At the 2019 WWDC, Apple announced Sign in with Apple which allows users to sign into applications and websites securely. Sign in with Apple ensures privacy by not tracking your sensitive information and also provides a synchronous experience across all your Apple devices. The best part is that it is offered in browsers for platforms like Android and Windows devices through Sign in with Apple JS.</p><p>Today we are going to take a look at how we can add Sign in with Apple into our swift app. Let's start by opening a new Swift project in Xcode.</p><p>First thing we have to do is enable Sign in with Apple. We do this by going to our target and going to the <strong>Signing &amp; Capabilities</strong>. Then in the left corner hit the <strong>+</strong> button and type in Sign in with Apple.</p><img src="https://swifttom.com/wp-content/uploads/2020/04/screen-shot-2020-04-14-at-4.34.53-pm.png?w=1024"/><p>Now we’re ready to add a Sign in with Apple button in our application. To implement this we need to import <strong>AuthenticationServices</strong> library and then make a <strong>ASAuthorizationAppleIDButton</strong>. Let look at the example below.</p><p>import UIKit import AuthenticationServices</p><p>class ViewController: UIViewController {</p><p>override func viewDidLoad() { super.viewDidLoad() configureSignInWithAppleButton()<br> }</p><p>func configureSignInWithAppleButton() {<br> // Create sign in button let signInButton = ASAuthorizationAppleIDButton()<br> //Add to view self.view.addSubview(signInButton)<br> // Function for the action of our button signInButton.addTarget(self, action: #selector(ViewController.signInButtonTapped), for: .touchDown)<br> // Remove constraints so we can add them programmatically signInButton.translatesAutoresizingMaskIntoConstraints = false<br> // Added button constraints NSLayoutConstraint.activate([ signInButton.centerXAnchor.constraint(equalToSystemSpacingAfter: view.centerXAnchor, multiplier: 1), signInButton.centerYAnchor.constraint(equalToSystemSpacingBelow: view.centerYAnchor, multiplier: 1), signInButton.heightAnchor.constraint(equalToConstant: 40), signInButton.widthAnchor.constraint(equalToConstant: 200) ]) } }</p><p>In the code above we are importing <strong>AuthenticationServices</strong> and then setting up our Sign in with Apple button programmatically.</p><p>First we create our button variable with our <strong>signInButton</strong>. Next we add our button to the subview. Then we add a target action to our button and remove the auto resizing constraints. Lastly we add the constraints for our sign in button.</p><p>Next we need to handle what happens when our sign in button is tapped. Let us take a look at the following code.</p><p>@objc private func signInButtonTapped() { let authorizationProvider = ASAuthorizationAppleIDProvider() let request = authorizationProvider.createRequest() request.requestedScopes = [.email]<br> let authorizationController = ASAuthorizationController(authorizationRequests: [request]) authorizationController.delegate = self authorizationController.presentationContextProvider = self authorizationController.performRequests() }</p><p>The <strong>signInButtonTapped()</strong> function will be called on when our button is tapped. What we are doing inside the function is creating our <strong>authorizationProvider</strong> and then creating a request to get the users information that we want to be able to use in our app. In this case we are only requesting for the users email but we can also ask for the users full name. Next we create a <strong>authorizationController</strong> to present to the user that will ask for permission to use their email information.</p><p>Now we need to handle the <strong>ASAuthorizationController</strong> delegate. This is where we will handle the users information once we are allowed access to the users email. To implement this we are going to add and extension at bottom of swift file outside of the viewcontroller.</p><p>extension ViewController: ASAuthorizationControllerDelegate {<br> func authorizationController(controller: ASAuthorizationController, didCompleteWithAuthorization authorization: ASAuthorization) { guard let appleIDCredential = authorization.credential as? ASAuthorizationAppleIDCredential else { return }<br> print("AppleID Credential Authorization: userId: (appleIDCredential.user), email: (String(describing: appleIDCredential.email))")<br> }<br>func authorizationController(controller: ASAuthorizationController, didCompleteWithError error: Error) { print("AppleID Credential failed with error: (error.localizedDescription)") } }</p><p>In the above extension we are checking with our guard let statement to see if we have any credentials. Usually we would do something with the users information but in this case we are just going to print our user email to the console. Lastly we create a function to handle the error in case something goes wrong. We will also print out an error to the console for this example but in a real project you would want to handle the error to the user with some kind of alert view.</p><p>Lastly we need to present our <strong>ASAuthorizationController</strong> by adding another extension to <strong>ViewController</strong>.</p><p>extension ViewController: ASAuthorizationControllerPresentationContextProviding { func presentationAnchor(for controller: ASAuthorizationController) -&gt; ASPresentationAnchor { return self.view.window! } }</p><p>This allows us to present the <strong>ASAuthorizationController</strong> over our app.</p><p>Our final code should look like the example below.</p><p>import UIKit import AuthenticationServices</p><p>class ViewController: UIViewController {<br> override func viewDidLoad() { super.viewDidLoad() configureSignInWithAppleButton()<br> }</p><p>func configureSignInWithAppleButton() {<br> // Create sign in button let signInButton = ASAuthorizationAppleIDButton()<br> //Add to view self.view.addSubview(signInButton)<br> // Function for the action of our button signInButton.addTarget(self, action: #selector(ViewController.signInButtonTapped), for: .touchDown)<br> // Remove constraints so we can add them programmatically signInButton.translatesAutoresizingMaskIntoConstraints = false<br> // Added button constraints NSLayoutConstraint.activate([ signInButton.centerXAnchor.constraint(equalToSystemSpacingAfter: view.centerXAnchor, multiplier: 1), signInButton.centerYAnchor.constraint(equalToSystemSpacingBelow: view.centerYAnchor, multiplier: 1), signInButton.heightAnchor.constraint(equalToConstant: 40), signInButton.widthAnchor.constraint(equalToConstant: 200) ]) }</p><p>@objc private func signInButtonTapped() { let authorizationProvider = ASAuthorizationAppleIDProvider() let request = authorizationProvider.createRequest() request.requestedScopes = [.email]<br> let authorizationController = ASAuthorizationController(authorizationRequests: [request]) authorizationController.delegate = self authorizationController.presentationContextProvider = self authorizationController.performRequests() }<br>}</p><p>extension ViewController: ASAuthorizationControllerDelegate {<br> func authorizationController(controller: ASAuthorizationController, didCompleteWithAuthorization authorization: ASAuthorization) { guard let appleIDCredential = authorization.credential as? ASAuthorizationAppleIDCredential else { return }<br> print("AppleID Credential Authorization: userId: (appleIDCredential.user), email: (String(describing: appleIDCredential.email))")<br> }<br> func authorizationController(controller: ASAuthorizationController, didCompleteWithError error: Error) { print("AppleID Credential failed with error: (error.localizedDescription)") } }</p><p>extension ViewController: ASAuthorizationControllerPresentationContextProviding { func presentationAnchor(for controller: ASAuthorizationController) -&gt; ASPresentationAnchor { return self.view.window! } }</p><p>Remember that we can only test for Sign in with Apple on a physical device and not in the Xcode simulator.</p><p>That's all there is to adding Sign in with Apple to your swift project.</p><p>I hope this post helps make it easy for your user to login to your app!</p><p>📱💻👨🏻‍💻Happy coding! 👨🏻‍💻💻📱</p></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/swift">Swift</a></li></ul></article></div><footer><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>